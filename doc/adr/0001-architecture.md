# アーキテクチャ

日付: 2019-01-28

## ステータス

採用

## 決定事項

DDDのオニオンアーキテクチャベースで構築する。

## コンテキスト

- 勉強用コードとして複雑な業務ルールを扱えるようにしたい
- フレームワークなど特定のインフラに依存しない作りができるようにしたい

## 決定理由

複雑な業務ルールを想定すると業務の仕様を表すモデリングが必要となる。  
そのような要求にマッチする開発手法がDDDのため採用する。

DDDを採用するにあたって仕様を表すレイヤとその他のレイヤを疎結合にする手法としてオニオンアーキテクチャを採用する。  
クリーンアーキテクチャだとレイヤ間は隣同士のみとなっているので厳密すぎるため採用しない。

## 選択肢

DDDについては業務仕様を表す手法として他のものを知らないため検討していない。  

- オニオンアーキテクチャ
- クリーンアーキテクチャ
- MVCパターン

### オニオンアーキテクチャ/クリーンアーキテクチャ

#### メリット

- 中心となるレイヤの独立性を保つことができる
- 中心の外のレイヤについては変更しやすくなる

#### デメリット

- レイヤが多くなるため詰め替えが多くなる
- 習熟しているメンバーが少ない

### MVCパターン

#### メリット

- 習熟しているメンバーが多い

#### デメリット

- モデルの定義の範囲が曖昧なため人によって理解が異なる
- トランザクションスクリプト的になりやすいため、処理が分散しやすい
