# ORM

日付: 2016-05-03

## ステータス

採用

## 決定事項

Doma2を採用する。

## コンテキスト


- 勉強用コードだが考え方自体は実業務で使えるようなものにしたい
  - 実業務として想定されるものとしては下記
    - 複雑検索が行われる

## 決定理由

複雑な検索に対して2Way SQLによるSQLコーディングがやりやすい、  
コンパイラによる型エラーや構文エラーなどのチェックができることからDoma2を採用する。

## 選択肢

- Doma2
- DBFlute
- JPA

### Doma2
#### メリット
- 2Way SQLにより柔軟なSQLが使える
- 型エラーや構文エラーなどをコンパイル時に検知することができる
#### デメリット
- 簡単なクエリでもSQLを書かないといけない
- アノテーションプロセッシングやGradleプラグインなどの環境構築に一手間かかる
### DBFlute
#### メリット
- 2Way SQLにより柔軟なSQLが使える
- 簡単なSQLはクエリビルダーで構築できる
- 付随するツールが豊富
#### デメリット
- 自動生成されるソースコードについてバージョン管理のコントロールが必要
- パラメータが間違っているかなどについては実行してみないとわからない
### JPA
#### メリット
- CRUDに対応したメソッドやクライテリアを利用するためSQLを書かなくて良い
- Java EEの標準仕様として定義されている
- キャッシュ機構やレイジーロードによりパフォーマンス改善ができる
#### デメリット
- 実際に発行されるSQLはログなどで出力しないとわからない
- キャッシュ機構やレイジーロードについて詳しく知らないとハマることが多い
